{% extends "base.html" %}

{% block page %}

  {% set map_config = h.get_map_config() %}
  <input type="hidden" id="csrf_token" name="csrf_token" value="{{ csrf_token() }}">
  <main aria-label="Resource Content">
    <div data-module="recline_view"
        data-module-site_url="{{ h.dump_json(h.url_for('home.index', _external=true)) }}"
        data-module-resource = "{{ h.dump_json(resource_json) }}";
        data-module-resource-view = "{{ h.dump_json(resource_view_json) }}";
        data-module-map_config= "{{ h.dump_json(map_config) }}";
        data-module-datastore_search_rows_max= "{{ h.get_datastore_search_rows_max() }}"
        data-module-csrf-token={{ csrf_token() }}
        >
      <h4 class="loading-dialog">
        <div class="loading-spinner"></div>
        <div class="left">{{ _('Loading...') }}</div>
      </h4>
    </div>
    <div class="modal">
      <div class="row">
        <div class="modal-content">
          <h3>Results exceed the current limit of rows that can be downloaded via the Data Explorer.</h3>
          <p>Use <a href="/pages/api" target="_blank">API</a> to download the full result set or continue with the truncated.</p>
          <button class="btn extract-button modal-btn" id="confirm-btn">Continue</button>
          <button class="btn extract-button modal-btn" id="cancel-btn">Cancel</button>
        </div>
      </div>
    </div>
  </main>

  {% asset 'dataexplorer/dataexplorer-css' %}
  {% asset 'dataexplorer/dataexplorer-js' %}
{% endblock %}

{% block styles %}{% endblock %}
{% block custom_styles %}{% endblock %}
